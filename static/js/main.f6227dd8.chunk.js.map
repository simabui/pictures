{"version":3,"sources":["components/App.module.css","components/Modal/Modal.module.css","components/button/Button.module.css","components/error/Error.module.css","components/searchbar/Searchbar.module.css","services/services.js","components/searchbar/Searchbar.js","components/button/Button.js","components/error/Error.js","components/Modal/Modal.js","components/App.js","index.js"],"names":["module","exports","App","Loader","Overlay","Modal","Button","Error","Searchbar","SearchForm","SearchForm-button","SearchForm-button-label","SearchForm-input","axios","defaults","baseURL","AwesomeDebouncePromise","query","arguments","length","undefined","page","get","concat","_ref","onSubmit","react_default","a","createElement","className","styles","type","autoComplete","placeholder","name","onClick","text","state","overlayRef","createRef","handleKeyPress","e","code","onClose","_this","props","handleOverlayClick","current","target","window","addEventListener","this","removeEventListener","image","ref","src","alt","Component","AsyncImageGallery","lazy","__webpack_require__","then","bind","collection","error","isLoading","isOpen","largeImg","handleRequest","_callee","response","regenerator_default","wrap","_context","prev","next","handleLoading","getRequestDebounced","sent","setState","Object","toConsumableArray","hits","data","map","id","smallImg","webformatURL","largeImageURL","t0","message","stop","bool","handleSubmit","preventDefault","search","currentTarget","elements","value","reset","handleClick","scrollTo","top","document","documentElement","scrollHeight","behavior","handleShowModal","closeModal","prevProp","prevState","_this$state","searchbar_Searchbar","react","fallback","Fragment","onRender","onShow","react_loader_spinner_default","visible","color","height","width","error_Error","button_Button","components_Modal_Modal","defaultProps","ReactDOM","render","components_App","getElementById"],"mappings":"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","file":"static/js/main.f6227dd8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__r47RI\",\"Loader\":\"App_Loader__2WR99\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2SL7Z\",\"Modal\":\"Modal_Modal__16QUR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1bpJQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Error\":\"Error_Error__1AIMU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3A301\",\"SearchForm\":\"Searchbar_SearchForm__3VkDa\",\"SearchForm-button\":\"Searchbar_SearchForm-button__2RAEz\",\"SearchForm-button-label\":\"Searchbar_SearchForm-button-label__3-_qj\",\"SearchForm-input\":\"Searchbar_SearchForm-input__2OZti\"};","import axios from 'axios';\nimport AwesomeDebouncePromise from 'awesome-debounce-promise';\n\nconst KEY = '15109703-4df3afa39634f93d9eb19fc69';\naxios.defaults.baseURL = `https://pixabay.com/api`;\n\nconst getRequest = (query = '', page = 1) =>\n  axios.get(\n    `?&key=${KEY}&image_type=photo&orientation=horizontal&per_page=12&q=${query}&page=${page}`,\n  );\n\n// debounce\nexport default AwesomeDebouncePromise(getRequest, 1000);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Searchbar.module.css';\n\nconst Searchbar = ({ onSubmit }) => (\n  <header className={styles.Searchbar}>\n    <form className={styles.SearchForm} onSubmit={onSubmit}>\n      <button type=\"submit\" className={styles['SearchForm-button']}>\n        <span className={styles['SearchForm-button-label']}>Search</span>\n      </button>\n\n      <input\n        className={styles['SearchForm-input']}\n        type=\"text\"\n        autoComplete=\"off\"\n        placeholder=\"Search images and photos\"\n        name=\"search\"\n      />\n    </form>\n  </header>\n);\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Button.module.css';\n\nconst Button = ({ onClick }) => (\n  <button type=\"button\" onClick={onClick} className={styles.Button}>\n    Load more\n  </button>\n);\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Error.module.css';\n\nconst Error = ({ text }) => <h1 className={styles.Error}>{text}</h1>;\n\nError.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default Error;\n","/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { Component, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Modal.module.css';\n\nclass Modal extends Component {\n  state = {};\n\n  overlayRef = createRef();\n\n  static propTypes = {\n    image: PropTypes.string.isRequired,\n    onClose: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyPress);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyPress);\n  }\n\n  handleKeyPress = e => {\n    if (e.code !== 'Escape') return;\n    // call parent function\n    const { onClose } = this.props;\n    onClose();\n  };\n\n  handleOverlayClick = e => {\n    const { current } = this.overlayRef;\n\n    if (current && e.target !== current) {\n      return;\n    }\n    // call parent function\n    const { onClose } = this.props;\n    onClose();\n  };\n\n  render() {\n    const { image } = this.props;\n    return (\n      <div\n        className={styles.Overlay}\n        ref={this.overlayRef}\n        onClick={this.handleOverlayClick}\n      >\n        <div className={styles.Modal}>\n          <img src={image} alt=\"large\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n","import React, { Component, lazy, Suspense } from 'react';\nimport Loader from 'react-loader-spinner';\nimport styles from './App.module.css';\nimport getRequestDebounced from '../services/services';\nimport Seachbar from './searchbar/Searchbar';\nimport Button from './button/Button';\nimport Error from './error/Error';\nimport Modal from './Modal/Modal';\n\n// REACT lazy\nconst AsyncImageGallery = lazy(() =>\n  import(/* webpackChunkName: \"imageGallery\" */ './imagegallery/ImageGallery'),\n);\n\n// edit incoming response\nfunction mapper(hits) {\n  return hits.map(({ id, webformatURL, largeImageURL }) => {\n    return {\n      id,\n      smallImg: webformatURL,\n      largeImg: largeImageURL,\n    };\n  });\n}\n\nclass App extends Component {\n  page = 1;\n\n  static propTypes = {};\n\n  static defaultProps = {};\n\n  state = {\n    collection: [],\n    query: '',\n    error: null,\n    isLoading: false,\n    isOpen: false,\n    largeImg: '',\n  };\n\n  componentDidMount() {\n    this.handleRequest();\n  }\n\n  // rerequest on new query\n  componentDidUpdate(prevProp, prevState) {\n    const { query } = this.state;\n    if (prevState.query !== query) {\n      this.handleRequest(query, this.page);\n    }\n  }\n\n  // axios request with query and page num\n  handleRequest = async (type, page) => {\n    this.handleLoading(true);\n    try {\n      const response = await getRequestDebounced(type, page);\n      this.setState(state => {\n        return {\n          collection: [...state.collection, ...mapper(response.data.hits)],\n        };\n      });\n    } catch (error) {\n      // send error to Error state\n      this.setState({ error: error.message });\n    }\n    this.handleLoading(false);\n  };\n\n  handleLoading = bool => {\n    this.setState({\n      isLoading: bool,\n    });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { search } = e.currentTarget.elements;\n\n    this.setState({ query: search.value });\n    this.reset();\n    // new response\n    this.handleRequest(search.value, 1);\n  };\n\n  // pagination\n  handleClick = () => {\n    this.page += 1;\n    const { query } = this.state;\n    this.handleRequest(query, this.page).then(() => {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    });\n  };\n\n  reset = () => {\n    this.page = 1;\n    this.setState({ collection: [] });\n  };\n\n  // Modal\n  handleShowModal = largeImg => {\n    const { isOpen } = this.state;\n    this.setState({\n      isOpen: !isOpen,\n      largeImg,\n    });\n  };\n\n  closeModal = () => this.setState({ isOpen: false });\n\n  render() {\n    const { collection, isLoading, error, isOpen, largeImg } = this.state;\n    return (\n      <div className={styles.App}>\n        <Seachbar onSubmit={this.handleSubmit} />\n        <Suspense fallback={<></>}>\n          <AsyncImageGallery\n            onRender={collection}\n            onShow={this.handleShowModal}\n          />\n        </Suspense>\n        <Loader\n          visible={isLoading}\n          type=\"TailSpin\"\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n          className={styles.Loader}\n        />\n        {error && <Error text={error} />}\n        {collection.length > 1 && <Button onClick={this.handleClick} />}\n        {isOpen && <Modal image={largeImg} onClose={this.closeModal} />}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport './styles/styles.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}